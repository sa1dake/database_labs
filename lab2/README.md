# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ2
## –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è ER-–¥—ñ–∞–≥—Ä–∞–º–∏ —É —Ä–µ–ª—è—Ü—ñ–π–Ω—É —Å—Ö–µ–º—É PostgreSQL

---

## üéØ –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏

–ú–µ—Ç–æ—é –¥–∞–Ω–æ—ó –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ —î –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è ER-–¥—ñ–∞–≥—Ä–∞–º–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ—ó –æ–±–ª–∞—Å—Ç—ñ
—É —Ä–µ–ª—è—Ü—ñ–π–Ω—É —Å—Ö–µ–º—É —Ç–∞ —ó—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —É –°–£–ë–î PostgreSQL

---

## üìå –û–ø–∏—Å

–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –≥—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
–µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –¥–ª—è —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏ (–º—ñ—Å—Ç–æ –ö–∏—ó–≤ —Ç–∞ –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å).

–°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î:
- –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É —ñ—î—Ä–∞—Ä—Ö—ñ—é (—Ä–µ–≥—ñ–æ–Ω ‚Üí —Ä–∞–π–æ–Ω),
- –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –≥—Ä—É–ø–∏ (—á–µ—Ä–≥–∏) –≤—ñ–¥–∫–ª—é—á–µ–Ω—å,
- –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ —á–∞—Å–æ–≤—ñ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å,
- —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—ñ –ø–æ–¥—ñ—ó –≤—ñ–¥–∫–ª—é—á–µ–Ω—å,
- –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

---

## –†–µ–ª—è—Ü—ñ–π–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

- Region(`region_id`, name, type)
- District(`district_id`, `region_id`, name)
- Address(`address_id`, `district_id`, street, building_number)
- PowerGroup(`group_id`, `district_id`, code)
- Schedule(`schedule_id`, `group_id`, valid_from, valid_to)
- TimeSlot(`timeslot_id`, `schedule_id`, day_of_week, start_time, end_time)
- Consumer(`consumer_id`, `address_id`, `group_id`, consumer_type)
- OutageEvent(`event_id`, `group_id`, start_datetime, end_datetime, reason)
- Notification(`notification_id`, `event_id`, message, created_at)

---

## üîó –û—Å–Ω–æ–≤–Ω—ñ –∑–≤ º—è–∑–∫–∏ –º—ñ–∂ —Ç–∞–±–ª–∏—Ü—è–º–∏

- –û–¥–∏–Ω **Region** –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –±–∞–≥–∞—Ç–æ **District**
- –û–¥–∏–Ω **District** –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –±–∞–≥–∞—Ç–æ **Address** —Ç–∞ **PowerGroup**
- –û–¥–Ω–∞ **PowerGroup** –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ **Schedule**
- –û–¥–∏–Ω **Schedule** –º—ñ—Å—Ç–∏—Ç—å –∫—ñ–ª—å–∫–∞ **TimeSlot**
- –û–¥–∏–Ω **Consumer** –Ω–∞–ª–µ–∂–∏—Ç—å –¥–æ –æ–¥–Ω—ñ—î—ó **Address** —Ç–∞ –æ–¥–Ω—ñ—î—ó **PowerGroup**
- –û–¥–Ω–∞ **PowerGroup** –º–æ–∂–µ –º–∞—Ç–∏ –±–∞–≥–∞—Ç–æ **OutageEvent**
- –û–¥–Ω–∞ **OutageEvent** –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ **Notification**

–£—Å—ñ –∑–≤ º—è–∑–∫–∏ —Ç–∏–ø—É `1:N` —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∫–ª—é—á—ñ–≤.

---

## üß© –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö (ENUM)

–î–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö —É PostgreSQL –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –ø–µ—Ä–µ–ª—ñ—á—É–≤–∞–Ω—ñ —Ç–∏–ø–∏:

- `region_type`: `city`, `region`
- `consumer_type`: `residential`, `business`, `critical`
- `outage_reason`: `scheduled`, `maintenance`, `emergency`

---

## üõ† –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —É PostgreSQL

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ö–µ–º–∏ –≤–∏–∫–æ–Ω–∞–Ω–∞ —É –≤–∏–≥–ª—è–¥—ñ –æ–∫—Ä–µ–º–∏—Ö SQL-—Å–∫—Ä–∏–ø—Ç—ñ–≤:

sql/
|--- types/
| |--- region_type.sql
| |--- consumer_type.sql
| |___ outage_reason.sql
|--- tables/
| |--- region.sql
| |--- district.sql
| |--- address.sql
| |--- power_group.sql
| |--- schedule.sql
| |--- time_slot.sql
| |--- consumer.sql
| |--- outage_event.sql
| |___ notification.sql
|___ test_data.sql

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ö–µ–º–∏ –±—É–ª–æ –≤–∏–∫–æ–Ω–∞–Ω–æ:
- —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ —ñ —Ç–∞–±–ª–∏—Ü—å —É PostgreSQL (Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

![alt text](images/tables_types.png)

- –¥–æ–¥–∞–≤–∞–Ω–Ω—è **–Ω–µ –º–µ–Ω—à–µ 3 —Ç–µ—Å—Ç–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ —É –∫–æ–∂–Ω—É —Ç–∞–±–ª–∏—Ü—é**

![alt text](images/selectfrom.png)

- –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–º–µ–∂–µ–Ω—å —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ —Ç–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∫–ª—é—á—ñ–≤.

–£—Å—ñ SQL-—Å–∫—Ä–∏–ø—Ç–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫.

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–∫–∏

–£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏:
- ER-–¥—ñ–∞–≥—Ä–∞–º–∞ –±—É–ª–∞ —É—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–∞ —É —Ä–µ–ª—è—Ü—ñ–π–Ω—É —Å—Ö–µ–º—É,
- —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ç–∞–±–ª–∏—Ü—ñ –∑ –ø–µ—Ä–≤–∏–Ω–Ω–∏–º–∏ —Ç–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ –∫–ª—é—á–∞–º–∏,
- –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ ENUM-—Ç–∏–ø–∏ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö,
- —Å—Ö–µ–º–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∞ –Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å —É PostgreSQL.
